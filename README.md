# Команды для управления образами
Значимая единица в Docker — образы. Управление ими во многом похоже на управление контейнерами, но есть ряд отличий, которые важно учитывать. Причем как в командах, так и в опциях.

У описанных ниже команд есть общий синтаксис, который выглядит так: docker image название команды. Названия ниже:

* build — собирает образ с нуля.
* push — отправляет образ в реестр.
* pull — загружает готовый образ с необходимыми для работы параметрами.
* ls — показывает все существующие образы.
* history — показывает каждый слой образа в ретроспективе, отображая ряд полезных сведений.
* inspect — рассказывает все, что известно об образе, включая данные, касающиеся отдельных слоев.
* rm — удаляет образ Docker из системы.
* images — списком показывает все образы Docker, найденные на диске.
* Рассмотрим каждую из них подробнее.

## build

С помощью этой команды можно собрать образ, используя заранее подобранные параметры. Собираются одни из данных, хранящихся в файлах Dockerfile. Они находятся по определенным URL или заранее загружены в файловую систему. 

*Синтаксис следующий:* 

> docker image build [опции]

название и адрес файла Dockerfile из которого будет собран образ
В квадратных скобках указываются опциональные компоненты команды. Использовать их необязательно, но можно оптимизировать создаваемый контейнер под свои задачи. 

Например, если вы хотите собрать образ с названием Timeweb и тегом host в директории moy_repositoriy, то надо ввести в терминал:

> docker image build -t moy_repositoriy/timeweb:host

Образами можно делиться через сервис Docker Hub. Тогда ими смогут пользоваться другие пользователи Docker, указав при сборке соответствующий адрес. Для входа в Hub используется команда docker login. 

## push

После сборки образа на диске хостинга, его можно разместить в Docker Hub с помощью отдельной команды: 

> docker image push [опции]

название и адрес, где будет размещен образ
К примеру, чтобы отправить в хаб образ Timeweb, нужно ввести в терминал:

> docker image push moy_repositoriy/timeweb:host 

Он будет размещен по адресу, указанному в команде push. После этого его смогут вытащить другие пользователи. 

## pull

В Docker Hub находится большой список уже готовых образов, которые были созданы вами или другими пользователями. Чтобы не собирать новые из Dockerfile, можно скачать уже имеющиеся и работать с ними. Чтобы их вытащить, нужна команда pull.

*Синтаксис следующий:* 

> docker image pull [опции] 

название и адрес, где будет размещен образ
К примеру, чтобы вытащить из хаба образ Timeweb, который ранее был загружен, нужно ввести в терминал:

> docker image pull moy_repositoriy/timeweb:host

Аналогичным образом его смогут вытаскивать другие пользователи, обращаясь к адресу и названию образа, которые вы указывали. 

## ls

docker image ls отвечает за отображение в терминале дополнительной информации об образах. Она показывает их список (как и в случае с контейнерами) и информацию о размере каждого:

> docker image ls [опции][адрес репозитория:тег]

## history

Показывает своего рода историю образа. Речь идет о «слоях», то есть промежуточных вариациях образа, входящих в его состав. Команда history показывает их названия, размер и дату создания.

*Синтаксис следующий:*

> docker history [опции] название образа

Например, чтобы отобразить слои образа Timeweb, введем в терминал:

> docker image history timeweb

Историю образа Hello World можно посмотреть следующим образом:

## inspect 

Отображает подробную информацию из Docker после обращения к конкретному образу:

> docker inspect [опции] название или ID контейнера [название контейнера или образа]


По умолчанию отображает данные в формате JSON. Можно использовать дополнительные опции:

* –format для смены формата данных.
* -s показывает размер инспектируемых элементов.

> docker inspect –format=‘{{.Config.Image}}’ $INSTANCE_ID — пример вывода информации о названии образа

> docker inspect –format=‘{{range .NetworkSettings.Networks}}{{.IPAddress}}{{end}}’ $INSTANCE_ID — пример вывода информации об IP-адресе

## rm

Команда удаления одного или нескольких образов Docker, найденных на диске вашего хостинга. 

*Синтаксис следующий:*

> docker rm [опции] название и путь до образа

Чтобы удалить образ Timeweb из системы, нужно ввести:

> docker rm moy_repositoriy/testing_timeweb:host

Эта команда позволяет выбирать только образы, которые хранятся локально. Удаленные элементы из репозитория удалить не получится. Чтобы удалить все локальные образы, обнаруженные в системе, введем в терминал:

> docker image rm $(docker images -a -q)

## images

Команда показывает все образы Docker, которые расположены на жестком диске вашего сервера (или локально). 
Вывод команды docker images выглядит так:
Здесь отображаются следующие данные, касающиеся образа:

* REPOSITORY — это репозитория, в котором хранится образ. 
* TAG — привязанный к нему тег (прописывается в конце команды после двоеточия. Например, docker image build moy_repositoriy/testing_timeweb:host
* IMAGE ID — код образа, используемый вместо имени. 
* CREATED — срок жизни. Показывает, как давно был создан образ. Неделю назад, 12 часов назад и т.п. 
* SIZE — пространство, которое образ занимает на диске. 
